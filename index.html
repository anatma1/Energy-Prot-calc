<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>砖 驻专转 注砖专转</title>
    <style>
        body { font-family: 'Segoe UI', system-ui, sans-serif; background: #f8fafc; margin: 0; padding: 10px; direction: rtl; }
        .container { max-width: 500px; margin: auto; background: white; padding: 15px; border-radius: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); min-height: 95vh; display: flex; flex-direction: column; }
        .header { text-align: center; margin-bottom: 12px; }
        h1 { font-size: 1.2rem; margin: 0; color: #1e293b; font-weight: 800; }
        
        #searchBar { width: 100%; padding: 10px; border-radius: 12px; border: 2px solid #e2e8f0; font-size: 0.95rem; margin-bottom: 10px; box-sizing: border-box; }
        select { width: 100%; padding: 10px; border-radius: 10px; border: 2px solid #1e293b; font-size: 1rem; margin-bottom: 12px; font-weight: 700; color: #1e293b; background-color: #fff; }
        
        input::-webkit-outer-spin-button, input::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
        input[type=number] { -moz-appearance: textfield; }

        .card { display: none; border-radius: 15px; border: 1px solid #e2e8f0; background: #fff; overflow: hidden; margin-bottom: 12px; }
        .info-header { background: #f1f5f9; padding: 8px 12px; font-weight: 700; color: #475569; font-size: 0.8rem; border-bottom: 1px solid #e2e8f0; }
        .info-row { display: flex; justify-content: space-between; }
        
        table { width: 100%; max-width: 450px; margin: 0 auto; border-collapse: collapse; table-layout: fixed; }
        th { background: #f8fafc; padding: 8px 2px; font-size: 0.65rem; color: #64748b; border-bottom: 2px solid #e2e8f0; text-align: center; }
        td { padding: 10px 2px; text-align: center; font-size: 0.85rem; font-weight: 700; border-bottom: 1px solid #f1f5f9; }
        .col-radio { width: 35px; } .col-conc { width: 55px; }
        .row-0 { background-color: #f0fff4; } .row-1 { background-color: #fffdf2; } .row-2 { background-color: #fff5f7; }
        
        .additives-section { background: #fdfdfd; padding: 12px; border: 1px solid #e2e8f0; border-radius: 15px; margin: 10px 0; }
        .additive-row { display: flex; align-items: center; margin-bottom: 10px; font-size: 0.85rem; font-weight: 600; }
        .add-label { width: 185px; flex-shrink: 0; line-height: 1.2; }
        .add-label small { font-size: 0.65rem; color: #94a3b8; font-weight: 400; display: block; }
        .add-input { width: 65px; margin: 0 8px; }
        .add-input input, .add-input select { width: 100%; padding: 8px; border-radius: 6px; border: 1px solid #cbd5e1; text-align: center; font-weight: 700; font-size: 0.9rem; background: white; height: 38px;}
        .additive-res { font-size: 0.75rem; color: #64748b; flex-grow: 1; text-align: left; min-width: 50px;}

        .vol-calc { background: #f8fafc; padding: 12px; border-radius: 15px; border: 1px dashed #cbd5e1; margin-top: 5px; }
        .input-group { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 6px; margin-bottom: 12px; }
        .input-field label { display: block; font-size: 0.7rem; margin-bottom: 3px; color: #64748b; font-weight: 600; text-align: center; }
        .input-field input { width: 100%; padding: 10px; border-radius: 8px; border: 1px solid #cbd5e1; font-size: 1rem; font-weight: 700; box-sizing: border-box; text-align: center; }
        
        .result-box { background: #1e293b; color: white; padding: 12px; border-radius: 12px; text-align: center; display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; }
        .res-item span { display: block; font-size: 0.7rem; opacity: 0.9; margin-bottom: 4px; }
        .res-item strong { font-size: 1.1rem; color: #facc15; display: block; }
        .res-item small { display: block; font-size: 0.65rem; color: #38bdf8; margin-top: 4px; line-height: 1.1; }
        
        .footer { text-align: center; margin-top: auto; padding-top: 10px; font-size: 0.75rem; color: #64748b; line-height: 1.4; border-top: 1px solid #f1f5f9; }
        .stock-legend { margin-top: 10px; font-size: 0.7rem; display: flex; justify-content: center; gap: 10px; flex-wrap: wrap;}
    </style>
</head>
<body>
<div class="container">
    <div class="header"><h1>砖 驻专转 注砖专转</h1></div>
    <input type="text" id="searchBar" placeholder="驻砖 驻专..." onkeyup="filter()">
    <select id="f" onchange="u()">
        <option value="">-- 专 驻专 --</option>
        <option value="bm">   (68 拽拽" / 1 ' )</option>
        <optgroup label="专">
            <option value="m_ex1"> 专 拽住专 拽专 1</option><option value="m_ex2"> 专 拽住专 拽专 2</option><option value="m_ex3"> 专 拽住专 拽专 3</option>
            <option value="m_h1"> 专  1</option><option value="m_h2"> 专  2</option><option value="m_h3"> 专  3</option>
            <option value="m_gp1"> 专  驻专 1</option><option value="m_gp2"> 专  驻专 2</option><option value="m_gp3"> 专  驻专 3</option>
            <option value="m_g1"> 专  1</option><option value="m_g2"> 专  2</option><option value="m_g3"> 专  3</option>
            <option value="m_exm1"> 专 拽住专 拽专 专 1</option><option value="m_exm2"> 专 拽住专 拽专 专 2</option><option value="m_exm3"> 专 拽住专 拽专 专 3</option>
            <option value="m_m1"> 专 专 1</option><option value="m_m2"> 专 专 2</option><option value="m_m3"> 专 专 3</option>
            <option value="m_ar"> 专 AR</option><option value="m_com"> 专 COMFORT</option><option value="m_sen"> 专 住住</option>
            <option value="m_veg1"> 专 爪转 (0-砖)</option><option value="m_veg2"> 专 爪转 (砖+)</option>
        </optgroup>
        <optgroup label="住拽">
            <option value="s_gp1"> 住拽  驻住 1</option><option value="s_gp2"> 住拽  驻住 2</option><option value="s_gp3"> 住拽  驻住 3</option>
            <option value="s_g1"> 住拽  1</option><option value="s_g2"> 住拽  2</option><option value="s_g3"> 住拽  3</option>
            <option value="s_m1"> 住拽 专 1</option><option value="s_m2"> 住拽 专 2</option><option value="s_m3"> 住拽 专 3</option>
            <option value="s_veg1"> 住拽 爪 1</option><option value="s_veg2"> 住拽 爪 2</option>
            <option value="s_com1"> 住拽  拽驻专 1</option><option value="s_com2"> 住拽  拽驻专 2</option>
            <option value="s_ar"> 住拽 AR</option><option value="s_neo"> 住拽 砖专</option>
        </optgroup>
        <optgroup label="专">
            <option value="n1"> 专 1</option><option value="n2"> 专 2</option><option value="n3"> 专 3</option>
            <option value="n_com"> 专 拽驻专</option><option value="n_ll"> 专  拽</option>
            <option value="n_p1"> 专 驻驻 1</option><option value="n_p2"> 专 驻驻 2</option>
            <option value="n_pj"> 专 驻驻 '专</option><option value="n_ar"> 专 AR</option>
        </optgroup>
        <optgroup label="驻专转 转">
            <option value="neo_lcp"> 拽 LCP</option><option value="neo_jr"> 拽 '专</option>
            <option value="mono"> </option><option value="nutren"> 专 '专 (拽)</option>
        </optgroup>
    </select>

    <div id="c" class="card">
        <div class="info-header" id="info_head"><div class="info-row"><span> 驻转: <span id="w"></span></span><span> 住: <span id="r"></span></span></div></div>
        <table>
            <thead>
                <tr><th class="col-radio">专</th><th class="col-conc">专</th><th>专<br><small>(100 ")</small></th><th><br><small>(100 ")</small></th></tr>
            </thead>
            <tbody id="b"></tbody>
        </table>

        <div class="additives-section">
            <div class="additive-row">
                <span class="add-label">注砖专转 砖专 <small>(  - 驻 5.13 / 1 ')</small></span>
                <div class="add-input">
                    <select id="ad_neo_p" onchange="calcVol()">
                        <option value="0"></option><option value="1.5">1.5%</option><option value="4.5">4.5%</option>
                    </select>
                </div>
                <span id="res_ad_neo" class="additive-res">0 拽拽"</span>
            </div>
            <div class="additive-row"><span class="add-label">拽专 (%) <small>(驻 3.84 / 1 ')</small></span><div class="add-input"><input type="number" id="ad_baby" placeholder="0" oninput="calcVol()"></div><span id="res_ad_baby" class="additive-res">0 拽拽"</span></div>
            <div class="additive-row"><span class="add-label">住转 拽专驻专 (%) <small>(驻 3.68 / 1 ')</small></span><div class="add-input"><input type="number" id="ad_corn" placeholder="0" oninput="calcVol()"></div><span id="res_ad_corn" class="additive-res">0 拽拽"</span></div>
            <div class="additive-row"><span class="add-label">住转 专 (%) <small>(驻 3.74 / 1 ')</small></span><div class="add-input"><input type="number" id="ad_rice" placeholder="0" oninput="calcVol()"></div><span id="res_ad_rice" class="additive-res">0 拽拽"</span></div>
            <div class="additive-row"><span class="add-label">砖 拽 (%) <small>(驻 9.0 / 1 ")</small></span><div class="add-input"><input type="number" id="ad_canola" placeholder="0" oninput="calcVol()"></div><span id="res_ad_canola" class="additive-res">0 拽拽"</span></div>
            <div class="additive-row"><span class="add-label">砖 MCT (%) <small>(驻 8.5 / 1 ")</small></span><div class="add-input"><input type="number" id="ad_mct" placeholder="0" oninput="calcVol()"></div><span id="res_ad_mct" class="additive-res">0 拽拽"</span></div>
        </div>

        <div class="vol-calc">
            <div class="input-group">
                <div class="input-field"><label>驻 (")</label><input type="number" id="v_ml" placeholder="0" oninput="calcVol()"></div>
                <div class="input-field"><label>专转</label><input type="number" id="v_num" placeholder="0" oninput="calcVol()"></div>
                <div class="input-field"><label>砖拽 (拽")</label><input type="number" id="v_kg" placeholder="0" oninput="calcVol()"></div>
            </div>
            <div class="result-box">
                <div class="res-item"><span>驻 </span><strong id="res_t_ml">0</strong><small>"</small></div>
                <div class="res-item"><span>拽拽" </span><strong id="res_kcal">0</strong><small id="res_kcal_kg"></small></div>
                <div class="res-item"><span> </span><strong id="res_pro">0</strong><small id="res_pro_kg"></small></div>
            </div>
        </div>
    </div>
    <div class="footer">
        注转 住住拽, 转 拽转 漏<br>专 砖专 专驻转  砖专
        <div class="stock-legend">
            <span> 拽 </span>
            <span> 住专 转 - 砖 </span>
            <span>  拽  - </span>
        </div>
    </div>
</div>

<script>
const data = {
    "bm": {w: "-", r: "-", l: [" "], d: [[68, 1.0]]},
    "m_ex1":{w:"~9g",r:"1:60",l:["13.5%","15%","18%"],d:[[66,1.4],[73,1.6],[88,1.87]]},"m_ex2":{w:"~9g",r:"1:60",l:["13.5%","15%","18%"],d:[[66,1.45],[73,1.6],[88,1.93]]},"m_ex3":{w:"~9g",r:"1:60",l:["13.5%","15%","18%"],d:[[66,1.6],[73,1.8],[88,2.13]]},"m_h1":{w:"~9g",r:"1:60",l:["13.5%","15%","18%"],d:[[68,1.45],[76,1.6],[91,1.93]]},"m_h2":{w:"~9g",r:"1:60",l:["13.5%","15%","18%"],d:[[69,1.58],[77,1.8],[92,2.11]]},"m_h3":{w:"~9g",r:"1:60",l:["13.5%","15%","18%"],d:[[66,1.6],[73,1.8],[88,2.13]]},"m_gp1":{w:"~9g",r:"1:60",l:["13.5%","15%","18%"],d:[[67,1.4],[74,1.6],[89,1.87]]},"m_gp2":{w:"~9g",r:"1:60",l:["13.5%","15%","18%"],d:[[67,1.3],[74,1.4],[89,1.73]]},"m_gp3":{w:"~9g",r:"1:60",l:["13.5%","15%","18%"],d:[[64,1.4],[71,1.6],[85,1.87]]},"m_g1":{w:"~9g",r:"1:60",l:["13.5%","15%","18%"],d:[[68,1.4],[76,1.6],[91,1.87]]},"m_g2":{w:"~9g",r:"1:60",l:["13.5%","15%","18%"],d:[[67,1.3],[74,1.4],[89,1.73]]},"m_g3":{w:"~9g",r:"1:60",l:["13.5%","15%","18%"],d:[[65,1.4],[72,1.6],[87,1.87]]},"m_exm1":{w:"~9g",r:"1:60",l:["13.5%","15%","18%"],d:[[66,1.5],[73,1.7],[88,2.0]]},"m_exm2":{w:"~9g",r:"1:60",l:["13.5%","15%","18%"],d:[[67,1.5],[74,1.7],[89,2.0]]},"m_exm3":{w:"~9g",r:"1:60",l:["13.5%","15%","18%"],d:[[66,1.6],[73,1.8],[88,2.13]]},"m_m1":{w:"~9g",r:"1:60",l:["13.5%","15%","18%"],d:[[68,1.5],[76,1.7],[91,2.0]]},"m_m2":{w:"~9g",r:"1:60",l:["13.5%","15%","18%"],d:[[67,1.45],[74,1.6],[89,1.93]]},"m_m3":{w:"~9g",r:"1:60",l:["13.5%","15%","18%"],d:[[66,1.59],[73,1.8],[88,2.12]]},"m_ar":{w:"~9g",r:"1:60",l:["13.5%","15%","18%"],d:[[67,1.44],[74,1.6],[89,1.92]]},"m_com":{w:"~9g",r:"1:60",l:["13.5%","15%","18%"],d:[[67,1.4],[74,1.6],[89,1.87]]},"m_sen":{w:"~9.6g",r:"1:60",l:["X","15%","18%"],d:[[0,0],[73,1.9],[88,2.28]]},"m_veg1":{w:"~9g",r:"1:60",l:["13.5%","15%","18%"],d:[[66,1.8],[73,2.0],[88,2.4]]},"m_veg2":{w:"~9g",r:"1:60",l:["13.5%","15%","18%"],d:[[66,1.8],[73,2.0],[88,2.4]]},"s_gp1":{w:"8.4g",r:"1:60",l:["13.5%","15%","18%"],d:[[65,1.32],[72,1.5],[87,1.76]]},"s_gp2":{w:"8.8g",r:"1:60",l:["13.5%","15%","18%"],d:[[67,1.38],[74,1.5],[89,1.84]]},"s_gp3":{w:"8.8g",r:"1:60",l:["13.5%","15%","18%"],d:[[67,1.37],[74,1.5],[89,1.83]]},"s_g1":{w:"8.3g",r:"1:60",l:["13.5%","15%","18%"],d:[[64,1.32],[71,1.5],[85,1.76]]},"s_g2":{w:"10.4g",r:"1:60",l:["X","15%","18%"],d:[[0,0],[75,2.34],[90,2.81]]},"s_g3":{w:"10.4g",r:"1:60",l:["X","15%","18%"],d:[[0,0],[73,2.77],[88,3.32]]},"s_m1":{w:"8.8g",r:"1:60",l:["13.5%","15%","18%"],d:[[68,1.5],[76,1.7],[91,2.0]]},"s_m2":{w:"10.2g",r:"1:60",l:["X","15%","18%"],d:[[0,0],[73.1,2.8],[88,3.36]]},"s_m3":{w:"10.2g",r:"1:60",l:["X","15%","18%"],d:[[0,0],[73.8,2.8],[89,3.36]]},"s_veg1":{w:"~9g",r:"1:60",l:["13.5%","15%","18%"],d:[[68,1.7],[76,1.9],[91,2.27]]},"s_veg2":{w:"9.8g",r:"1:60",l:["13.5%","15%","18%"],d:[[69,2.16],[77,2.4],[92,2.88]]},"s_com1":{w:"8.9g",r:"1:60",l:["13.5%","15%","18%"],d:[[68,1.56],[76,1.7],[91,2.08]]},"s_com2":{w:"10.3g",r:"1:60",l:["X","15%","18%"],d:[[0,0],[74,2.35],[89,2.82]]},"s_ar":{w:"8.8g",r:"1:60",l:["13.5%","15%","18%"],d:[[68,1.45],[76,1.6],[91,1.93]]},"s_neo":{w:"9.8g",r:"1:60",l:["X","15%","18%"],d:[[0,0],[74,1.93],[89,2.32]]},"n1":{w:"4.5g",r:"1:30",l:["13.5%","15%","18%"],d:[[65,1.3],[72,1.44],[87,1.73]]},"n2":{w:"4.9g",r:"1:30",l:["13.5%","15%","18%"],d:[[67,1.4],[74,1.56],[89,1.87]]},"n3":{w:"4.8g",r:"1:30",l:["13.5%","15%","18%"],d:[[63,1.5],[70,1.67],[84,2.0]]},"n_com":{w:"4.4g",r:"1:30",l:["13.5%","15%","18%"],d:[[65,1.5],[72,1.67],[87,2.0]]},"n_ll":{w:"4.3g",r:"1:30",l:["13.5%","15%","18%"],d:[[66,1.3],[73,1.44],[88,1.73]]},"n_p1":{w:"4.5g",r:"1:30",l:["13.5%","15%","18%"],d:[[67,1.6],[74,1.78],[89,2.13]]},"n_p2":{w:"4.8g",r:"1:30",l:["13.5%","15%","18%"],d:[[68,1.6],[76,1.78],[91,2.13]]},"n_pj":{w:"4.3g",r:"1:30",l:["13.5%","15%","18%"],d:[[66,1.8],[73,2.0],[88,2.4]]},"n_ar":{w:"4.4g",r:"1:30",l:["13.5%","15%","18%"],d:[[65,1.6],[72,1.78],[87,2.13]]},"neo_lcp":{w:"4.5g",r:"1:30",l:["13.5%","15%","18%"],d:[[67,1.8],[74,2.0],[89,2.4]]},"neo_jr":{w:"7.3g",r:"1:30*",l:["14.5%","21.1%*","26.5%"],d:[[69,1.9],[100,2.8],[126,3.5]]},"mono":{w:"5.6g",r:"1:30",l:["16.8%","20.0%","22.0%"],d:[[74,2.2],[88,2.6],[97,2.9]]},"nutren":{w:"7.8g",r:"1:30",l:["22.0%","32.0%","X"],d:[[101,3.0],[147,4.4],[0,0]]}
};

function filter(){
    let q=document.getElementById('searchBar').value.toLowerCase();
    let opts=document.getElementById('f').querySelectorAll('option');
    opts.forEach(opt => { if(opt.value !== "") opt.style.display = opt.text.toLowerCase().includes(q) ? "block" : "none"; });
}
function u(){
    let v=document.getElementById('f').value;
    if(!v){document.getElementById('c').style.display='none';return;}
    let f=data[v]; document.getElementById('c').style.display='block';
    if(v==="bm") document.getElementById('info_head').style.display='none';
    else { document.getElementById('info_head').style.display='block'; document.getElementById('w').innerText=f.w; document.getElementById('r').innerText=f.r; }
    let b="";
    f.d.forEach((r,i)=>{
        if(f.l[i]=="X" || r[0]===0) return;
        let checked = (v === "bm" || i===0) ? "checked" : "";
        b+=`<tr class="row-${i}"><td class="col-radio"><input type="radio" name="conc" value="${i}" ${checked} onclick="calcVol()"></td><td class="col-conc">${f.l[i]}</td><td><span id="kcal_${i}">${r[0]}</span></td><td><span id="pro_${i}">${r[1]}</span></td></tr>`;
    });
    document.getElementById('b').innerHTML=b;
    calcVol();
}
function calcVol(){
    let ml = parseFloat(document.getElementById('v_ml').value) || 0;
    let num = parseFloat(document.getElementById('v_num').value) || 0;
    let weight = parseFloat(document.getElementById('v_kg').value) || 0;
    let total_ml = ml * num;
    document.getElementById('res_t_ml').innerText = total_ml;

    // Neosure: 5.13 kcal/g, 0.134 g/g
    let neo_p = parseFloat(document.getElementById('ad_neo_p').value) || 0;
    let neo_k = (neo_p * total_ml / 100) * 5.13;
    let neo_pro = (neo_p * total_ml / 100) * 0.134;
    document.getElementById('res_ad_neo').innerText = Math.round(neo_k) + " 拽拽\"";

    let b_k = (parseFloat(document.getElementById('ad_baby').value) || 0) * total_ml / 100 * 3.84;
    let c_k = (parseFloat(document.getElementById('ad_corn').value) || 0) * total_ml / 100 * 3.68;
    let r_k = (parseFloat(document.getElementById('ad_rice').value) || 0) * total_ml / 100 * 3.74;
    let can_k = (parseFloat(document.getElementById('ad_canola').value) || 0) * total_ml / 100 * 9;
    let mct_k = (parseFloat(document.getElementById('ad_mct').value) || 0) * total_ml / 100 * 8.5;

    document.getElementById('res_ad_baby').innerText = Math.round(b_k) + " 拽拽\"";
    document.getElementById('res_ad_corn').innerText = Math.round(c_k) + " 拽拽\"";
    document.getElementById('res_ad_rice').innerText = Math.round(r_k) + " 拽拽\"";
    document.getElementById('res_ad_canola').innerText = Math.round(can_k) + " 拽拽\"";
    document.getElementById('res_ad_mct').innerText = Math.round(mct_k) + " 拽拽\"";

    let sel = document.querySelector('input[name="conc"]:checked');
    let base_k = 0, base_p = 0;
    if(sel){
        base_k = (parseFloat(document.getElementById(`kcal_${sel.value}`).innerText) * total_ml) / 100;
        base_p = (parseFloat(document.getElementById(`pro_${sel.value}`).innerText) * total_ml) / 100;
    }

    let final_k = Math.round(base_k + neo_k + b_k + c_k + r_k + can_k + mct_k);
    let final_p = (base_p + neo_pro).toFixed(1);
    document.getElementById('res_kcal').innerText = final_k;
    document.getElementById('res_pro').innerText = final_p + " '";

    if(weight > 0) {
        document.getElementById('res_kcal_kg').innerText = "(" + Math.round(final_k/weight) + " 拽\")";
        document.getElementById('res_pro_kg').innerText = "(" + (final_p/weight).toFixed(2) + " 拽\")";
    } else { document.getElementById('res_kcal_kg').innerText = ""; document.getElementById('res_pro_kg').innerText = ""; }
}
</script>
</body>
</html>
